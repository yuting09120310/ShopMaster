@using ShopMaster.Areas.FrontEnd.ViewModels
@model CheckoutViewModel

@{
}

<div class="page-title-area">
    <div class="container">
        <div class="page-title-content">
            <h2>結帳</h2>
            <ul>
                <li><a href="index.html">首頁</a></li>
                <li>結帳</li>
            </ul>
        </div>
    </div>
</div>

<section class="checkout-area ptb-100">
    <div class="container">
        <form>
            <div class="row justify-content-center">
                <div class="col-lg-6 col-md-12">
                    <div class="billing-details">
                        <h3 class="title">訂購資訊</h3>

                        <div class="row justify-content-center">
                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>會員名稱</label>
                                    <input type="text" class="form-control" value="@Model.Member.Name" readonly>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>會員等級</label>
                                    <input type="text" class="form-control" value="@Model.Member.MemberType.Name">
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-6">
                                <div class="form-group">
                                    <label>訂單地址</label>
                                    <input type="text" class="form-control" value="@Model.Member.Address" readonly>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-6">
                                <div class="form-group">
                                    <label>手機號碼</label>
                                    <input type="text" class="form-control" value="@Model.Member.Phone" readonly>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-12">
                                <div class="form-group">
                                    <label>優惠券</label>

                                    <div class="select-box">
                                        <select class="form-control">
                                            <option>United Arab Emirates</option>
                                            <option>China</option>
                                            <option>United Kingdom</option>
                                            <option>Germany</option>
                                            <option>France</option>
                                            <option>Japan</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-12">
                                <div class="form-group">
                                    <label>訂單備註</label>
                                    <textarea name="notes" id="notes" cols="30" rows="5" placeholder="Order Notes" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 col-md-12">
                    <div class="order-details">
                        <h3 class="title">產品</h3>

                        <div class="order-table table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">商品名稱</th>
                                        <th scope="col">金額</th>
                                    </tr>
                                </thead>

                                <tbody>

                                    @foreach (var item in Model.Carts)
                                    {
                                        <tr>
                                            <td class="product-name">
                                                <a href="#">@item.Product.Name (@item.ProductSpec)</a>
                                            </td>
                                            <td class="product-total">
                                                <span class="subtotal-amount">@item.Product.Price.ToString("C")</span>
                                            </td>
                                        </tr>
                                    }

                                    <tr>
                                        <td class="order-subtotal">
                                            <span>訂單金額</span>
                                        </td>

                                        <td class="order-subtotal-price">
                                            <span class="order-subtotal-amount">$@Model.Carts.Sum(item => item.Product.Price * item.Quantity)</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="order-shipping">
                                            <span>會員折扣</span>
                                        </td>

                                        <td class="shipping-price">
                                            <span style="color:red">
                                                $@{
                                                    var totalAmount = Model.Carts.Sum(item => item.Product.Price * item.Quantity);
                                                    var discountAmount = totalAmount * (1 - Model.Member.MemberType.Discount);
                                                    @discountAmount.ToString("F2")
                                                    ;
                                                }
                                            </span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="total-price">
                                            <span>Order Total</span>
                                        </td>

                                        <td class="product-subtotal">
                                            <span class="subtotal-amount">$830.00</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="payment-box">
                            <div class="payment-method">
                                <p>
                                    <input type="radio" id="direct-bank-transfer" name="radio-group" checked="">
                                    <label for="direct-bank-transfer">Direct Bank Transfer</label>
                                    Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.
                                </p>
                                <p>
                                    <input type="radio" id="paypal" name="radio-group">
                                    <label for="paypal">PayPal</label>
                                </p>
                                <p>
                                    <input type="radio" id="cash-on-delivery" name="radio-group">
                                    <label for="cash-on-delivery">Cash on Delivery</label>
                                </p>
                            </div>

                            <a href="#" class="default-btn">Place Order</a>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>